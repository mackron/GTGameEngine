<!--
The editor is made up of 5 sections: Top, bottom, center, left and right. The center section is the main viewport.
-->

<style url="styles/theme.style" />

<include url="menubar.xml" />
<include url="combobox.xml" />

<script>
<![CDATA[
    -- When the main editor window is resized, we need to size the main viewport area.
    EditorMain:OnSize(function(data)
        EditorCenterPanel:SetHeight(EditorMain:GetInnerHeight() - (EditorTopPanel:GetHeight() + EditorBottomPanel:GetHeight()));
    end)
    
    EditorCenterPanel:OnSize(function(data)
        ModelViewport:SetWidth(EditorCenterPanel:GetInnerWidth()  - ModelEditorLeftPanel:GetWidth());
    end)
    
    ModelEditorLeftPanel:OnMouseWheel(function(data)
        print("Mouse Wheel from Lua: " .. tostring(data.delta) .. " " .. tostring(data.x) .. " " .. tostring(data.y));
    end)
]]>
</script>

<script>
<![CDATA[
    MenuBar_ModelMode:MenuBar();
    file = MenuBar_ModelMode:AppendItem("File");
    file.menu:AppendItem("Open...");
    file.menu:AppendSeparator();
    file.menu:AppendItem("Save");
    file.menu:AppendItem("Save As...");
    file.menu:AppendSeparator();
    file.menu:AppendItem("Exit"):OnPressed(function()
        Game.Close();
    end);
    
    MenuBar_ModelMode:AppendItem("Edit");
    MenuBar_ModelMode:AppendItem("View");

    ModeSwitcher:ComboBox();
    ModeSwitcher:AppendItem("Model Edit Mode");
    --ModeSwitcher:AppendItem("Material Edit Mode");
]]>
</script>

<script url="scripts/listbox.lua" />

<style>
    textbox
    {
        background-color: #3a3a3a
        border:           1px #666
        padding:          2px 0px
        height:           20px
        width:            192px
        
        editable-text:    true
        cursor:           beam
        text-cursor-color: #999
        text-color:        #999
        vertical-align:   center
    }
    
    button
    {
        background-color: #333
        border:           1px #ddd
        width:            auto
        height:           auto
        padding:          4px
        horizontal-align: center
        vertical-align:   center
        font-style:       bold
    }
    
    button:hovered
    {
        background-color: #555
    }
    
    button:pushed
    {
        background-color: #777
    }
    
    listbox
    {
        height:           auto;
        background-color: #fff;
        border:           1px #666;
        child-plane:      vertical;
    }
    
    listbox-item
    {
        width:            100%
        height:           20px
        background-color: #fff
        vertical-align:   center
        padding:          4px 0px
    }
    
    listbox-item:hovered
    {
        background-color: #f4f4ff
    }
    
    listbox-item-selected
    {
        background-color: #eef
    }
    
    listbox-item-selected:hovered
    {
        background-color: #eef
    }
    
    
    
    #EditorMain
    {
        width:   100%
        height:  100%
        
        background-color: #333
    }
    
    #EditorTopPanel
    {
        width:          100%
        height:         22px
        child-plane:    horizontal
        vertical-align: center
        padding-left:   4px
        
        border-bottom: 1px #2b2b2b
    }
    
    #EditorTopPanel_Left
    {
        width:          50%
        height:         100%
        child-plane:    horizontal
        vertical-align: center
    }
    
    #EditorTopPanel_Right
    {
        width:            50%
        height:           100%
        child-plane:      horizontal
        vertical-align:   center
        horizontal-align: right
    }
    
    
    #EditorBottomPanel
    {
        width:       100%
        height:      sidePanelSize
        child-plane: horizontal
        
        border-top: 1px #2b2b2b
        
        vertical-align: center
    }
    
    #EditorCenterPanel
    {
        height:      0px
        width:       100%
        child-plane: horizontal
    }
    
    #ModelEditorLeftPanel
    {
        width:  350px
        height: 100%
    }

    #ModelViewport
    {
        height:        100%
        width:         100%
    
        border-left:   1px #222
    }
    
    
    #ModelEditor
    {
        width:  100%
        height: 100%
        
        child-plane: horizontal
    }
</style>

<!-- Dialog styles -->
<style>
    dialog
    {
        positioning:      relative
        left:             36px
        top:              28px
        width:            auto
        height:           auto
        padding:          4px
        border:           1px #666
        background-color: #f9f9ff
        visible:          false
    }
    
    dialog-title
    {
        padding-bottom: 4px
        margin-bottom:  8px
        font-style:     bold
        border-bottom:  1px #666
    }
    
    dialog-body
    {
        child-plane:    horizontal
        vertical-align: center
        width:          100%
    }
    
    dialog-footer
    {
        width:            100%
        horizontal-align: right
        child-plane:      horizontal
        margin-top:       8px
        padding-top:      4px
        border-top:       1px #ccc
    }
</style>

<div id="EditorMain">
    <div id="EditorTopPanel">
        <!--
        The top panel is split into two parts. The left side contains the normal menu bar. The right side contains additional stuff
        such as the mode switcher.
        -->
        <div id="EditorTopPanel_Left">
            <div id="MenuBar_ModelMode" styleclass="menubar" />
        </div>
        
        <div id="EditorTopPanel_Right" style="horizontal-align:right; vertical-align:center; padding-right:0px;">
            <div id="ModeSwitcher" styleclass="combobox" style="height:100%; margin-right:0px;" />
        </div>
    </div>

    <!--
    The center panel is where individual editting tools can use their own GUIs.
    -->
    <div id="EditorCenterPanel">
        <div id="ModelEditor">
            <div id="ModelEditorLeftPanel">
            </div>
            <div id="ModelViewport">
            </div>
        </div>
    </div>

    <div id="EditorBottomPanel">
        <div style="width:auto; margin-left:4px; margin-right:8px; text-color:#888;">Command:</div>
        <div id="CommandTextBox" styleclass="textbox" style="height:22px; width:400px; inner-offset-x:16px;" />
    </div>
  
    <!-- This section contains relative positioned controls. Usually dialog boxes. -->
</div>
