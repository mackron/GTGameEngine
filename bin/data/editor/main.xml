<!--
The editor is made up of 5 sections: Top, bottom, center, left and right. The center section is the main viewport.
-->

<style url="styles/theme.style" />

<include url="menubar.xml" />
<include url="combobox.xml" />
<include url="file-explorer.xml" />

<script>
<![CDATA[
]]>
</script>

<script>
<![CDATA[
    MenuBar_ModelMode:MenuBar();
    file = MenuBar_ModelMode:AppendItem("File");
    file.menu:AppendItem("Open..."):OnPressed(function()
        MenuBar_ModelMode:CollapseMenu();
        OpenModelDialog:Show();
    end);
    file.menu:AppendSeparator();
    file.menu:AppendItem("Save");
    file.menu:AppendItem("Save As...");
    file.menu:AppendSeparator();
    file.menu:AppendItem("Exit"):OnPressed(function()
        Game.Close();
    end);
    
    MenuBar_ModelMode:AppendItem("Edit");
    MenuBar_ModelMode:AppendItem("View");

    ModeSwitcher:ComboBox();
    ModeSwitcher:AppendItem("Model Editor");
    --ModeSwitcher:AppendItem("Material Editor");
]]>
</script>

<!-- Model Editor Dialog Box -->
<script>
<![CDATA[
    OpenModelDialog_FileExplorer:FileExplorer();

    btnOpenModelDialog_Open:OnPressed(function()
        OpenModelDialog:Hide();
    end);

    btnOpenModelDialog_Close:OnPressed(function()
        OpenModelDialog:Hide();
    end);
]]>
</script>

<script url="scripts/listbox.lua" />

<style>
    textbox
    {
        background-color:  #3a3a3a
        border:            1px #666
        padding:           2px 0px
        height:            20px
        width:             192px
        
        editable-text:     true
        cursor:            beam
        text-cursor-color: #999
        text-color:        #999
        vertical-align:    center
    }
    
    button
    {
        background-color: #555
        border:           1px #aaa
        width:            auto
        height:           auto
        padding:          4px
        horizontal-align: center
        vertical-align:   center
        font-style:       bold
        text-color:       #aaa
    }
    
    button:hovered
    {
        background-color: #666
    }
    
    button:pushed
    {
        background-color: #777
    }
    
    listbox
    {
        height:           auto;
        background-color: #fff;
        border:           1px #666;
        child-plane:      vertical;
    }
    
    listbox-item
    {
        width:            100%
        height:           20px
        background-color: #fff
        vertical-align:   center
        padding:          4px 0px
    }
    
    listbox-item:hovered
    {
        background-color: #f4f4ff
    }
    
    listbox-item-selected
    {
        background-color: #eef
    }
    
    listbox-item-selected:hovered
    {
        background-color: #eef
    }
    
    
    
    #EditorMain
    {
        width:   100%
        height:  100%
        
        flex-child-height:true
        
        background-color: #333
    }
    
    #EditorTopPanel
    {
        width:          100%
        height:         22px
        child-plane:    horizontal
        vertical-align: center
        padding-left:   4px
        
        border-bottom: 1px #2b2b2b
    }
    
    #EditorTopPanel_Left
    {
        width:          50%
        height:         100%
        child-plane:    horizontal
        vertical-align: center
    }
    
    #EditorTopPanel_Right
    {
        width:            50%
        height:           100%
        child-plane:      horizontal
        vertical-align:   center
        horizontal-align: right
    }
    
    
    #EditorBottomPanel
    {
        width:       100%
        height:      sidePanelSize
        child-plane: horizontal
        
        border-top: 1px #2b2b2b
        
        vertical-align: center
    }
    
    #EditorCenterPanel
    {
        height:      100%
        width:       100%
        child-plane: horizontal
    }
    
    
    
    
    #ModelEditor
    {
        width:  100%
        height: 100%
        
        flex-child-width:true
        
        child-plane: horizontal
    }
    
    #ModelEditorLeftPanel
    {
        width:  350px
        height: 100%
        
        allow-mouse-resize:true;
        right-gripper-width:8px;
        
        border-right:   1px #222
    }

    #ModelViewport
    {
        width:         100%
        height:        100%
    }
</style>

<!-- Dialog styles -->
<style>
    dialog-container
    {
        positioning: absolute
        width:       100%
        height:      100%
        
        background-color: #000
        opacity:          0.50
        
        visible: false
        
        z-index: 100
    }
    
    dialog  // Elements using this will be children of elements using 'dialog-container'
    {
        positioning:      relative
        left:             36px
        top:              28px
        width:            300px
        height:           200px
        padding:          8px
        border:           1px #666
        background-color: #444
        
        allow-mouse-drag: true
        
        allow-mouse-resize:   true
        right-gripper-width:  8px
        bottom-gripper-width: 8px
        
        compound-opacity: false
        
        enable-shadow:      true
        shadow-extrusion-x: 8px
        shadow-extrusion-y: 8px
        shadow-blur-radius: 8px
        shadow-opacity:     1.0
    }

    
    dialog-title
    {
        padding-bottom: 4px
        margin-bottom:  8px
        font-style:     bold
        border-bottom:  1px #999
    }
    
    dialog-body
    {
        child-plane:    horizontal
        vertical-align: center
        width:          100%
    }
    
    dialog-footer
    {
        width:            100%
        horizontal-align: right
        child-plane:      horizontal
        margin-top:       8px
        padding-top:      4px
        border-top:       1px #ccc
    }
</style>

<div id="EditorMain">
    <div id="EditorTopPanel">
        <!--
        The top panel is split into two parts. The left side contains the normal menu bar. The right side contains additional stuff
        such as the mode switcher.
        -->
        <div id="EditorTopPanel_Left">
            <div id="MenuBar_ModelMode" styleclass="menubar" />
        </div>
        
        <div id="EditorTopPanel_Right" style="horizontal-align:right; vertical-align:center; padding-right:0px;">
            <div id="ModeSwitcher" styleclass="combobox" style="height:100%; margin-right:0px;" />
        </div>
    </div>

    <!--
    The center panel is where individual editting tools can use their own GUIs.
    -->
    <div id="EditorCenterPanel">
        <div id="ModelEditor" style="text-color:#f00">
            <div id="ModelEditorLeftPanel">
            </div>
            <div id="ModelViewport">
            </div>
        </div>
    </div>

    <div id="EditorBottomPanel">
        <div style="width:auto; margin-left:4px; margin-right:8px; text-color:#888;">Command:</div>
        <div id="CommandTextBox" styleclass="textbox" style="height:22px; width:400px; inner-offset-x:16px;" />
    </div>
  
    <!-- This section contains relative positioned controls. Usually dialog boxes. -->
    <div id="OpenModelDialog" styleclass="dialog-container">
        <div styleclass="dialog" style="horizontal-align:right; padding-top:20px; flex-child-height:true">
            <div id="OpenModelDialog_FileExplorer" styleclass="file-explorer" style="border-bottom:1px #999; padding-bottom:8px;" />
            <div style="width:auto; height:auto; margin-top:8px; child-plane:horizontal; transparent-mouse-input:true;">
                <div id="btnOpenModelDialog_Open"  styleclass="button" style="margin-right:4px; width:100px">Open</div>
                <div id="btnOpenModelDialog_Close" styleclass="button" style="                  width:100px">Close</div>
            </div>
        </div>
    </div>
</div>
